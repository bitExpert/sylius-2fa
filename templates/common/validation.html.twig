<script>
    document.addEventListener('DOMContentLoaded', function() {
        const containers = document.querySelectorAll('.verification-code');
        containers.forEach(container => {
            const inputs = container.querySelectorAll('.digit-input');
            if (inputs.length > 0) {
                inputs[0].focus();
            }

            inputs.forEach((input, index) => {
                input.addEventListener('input', () => {
                    if (input.value.length === 1 && index < inputs.length - 1) {
                        inputs[index + 1].focus();
                    }
                });

                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && input.value === '' && index > 0) {
                        inputs[index - 1].focus();
                    }
                });

                input.addEventListener('paste', (e) => {
                    e.preventDefault();

                    const pastedData = e.clipboardData.getData('text').replace(/\D/g, '');
                    if (!pastedData) {
                        return;
                    }

                    inputs.forEach(input => input.value = '');
                    pastedData.split('').slice(0, inputs.length).forEach((char, i) => {
                        inputs[i].value = char;
                    });

                    const nextIndex = Math.min(pastedData.length, inputs.length - 1);
                    inputs[nextIndex].focus();
                });
            });
        });
    });
</script>
